// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

// datasource db {
//   provider = "postgresql"
//   url      = env("DATABASE_URL")
// }

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id       Int     @id @default(autoincrement())
  username String  @unique
  email    String?
  password String
}

// enum CotizacionStatus {
//   DRAFT // Borrador
//   SENT // Enviada
//   ACCEPTED // Aceptada
//   REJECTED // Rechazada
//   EXPIRED // Expirada
// }

enum CotizacionStatus {
  ESTADO1
  ESTADO2
  ESTADO3
  ESTADO4
  ESTADO5
  ESTADO6
}

model Client {
  id         Int          @id @default(autoincrement())
  name       String
  contact    String
  ruc        String
  reference  String
  createAt   DateTime     @default(now())
  //agregar la relacion de cotizacion
  Cotizacion Cotizacion[]
}

model Cotizacion {
  id              Int              @id @default(autoincrement())
  status          CotizacionStatus @default(ESTADO1)
  code            String
  parentCode      String
  clientId        Int?
  client          Client?          @relation(fields: [clientId], references: [id])
  //Client ---
  clientName      String
  clientContact   String
  clientRuc       String
  clientReference String

  date             DateTime
  deliverTime      String
  paymentCondition String
  totalPrice       Float
  items            Json
  isEdit           Boolean  @default(false)
}

model LastCodeCotizacion {
  id           Int @id @default(autoincrement())
  cotizacionId Int
  nextCode     Int @default(0)
}

model CodeCotizacion {
  id       Int @id @default(autoincrement())
  nextCode Int
}
