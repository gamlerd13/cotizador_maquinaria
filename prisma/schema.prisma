// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int     @id @default(autoincrement())
  username String  @unique
  email    String?
  password String
}

enum CotizacionStatus {
  DRAFT // Borrador
  SENT // Enviada
  ACCEPTED // Aceptada
  REJECTED // Rechazada
  EXPIRED // Expirada
}

model Client {
  id         Int          @id @default(autoincrement())
  name       String
  contact    String
  ruc        String
  reference  String
  createAt   DateTime     @default(now())
  //agregar la relacion de cotizacion
  Cotizacion Cotizacion[]
}

model Cotizacion {
  id              Int              @id @default(autoincrement())
  status          CotizacionStatus @default(DRAFT)
  code            String
  clientId        Int?
  client          Client?          @relation(fields: [clientId], references: [id])
  //Client ---
  clientName      String
  clientContact   String
  clientRuc       String
  clientReference String

  date             DateTime
  deliverTime      String
  paymentCondition String
  totalPrice       Float
  items            Json
}

model CodeCotizacion {
  id       Int @id @default(autoincrement())
  nextCode Int
}
